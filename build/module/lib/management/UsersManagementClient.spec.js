import { ManagementClient } from './index';
import { getOptionsFromEnv, randomString } from './../utils/helper';
import test from "ava";
const management = new ManagementClient(getOptionsFromEnv());
const usersManagement = management.users;
test('should be able to create user', async (t) => {
    const user = await usersManagement.create({
        userInfo: {
            username: randomString(),
            password: "123456!"
        }
    });
    t.assert(user);
    t.assert(user._id);
    t.assert(user.username);
});
test("should be able to get user list", async (t) => {
    const users = await usersManagement.list();
    t.assert(users);
    t.assert(users.totalCount !== undefined);
    t.assert(users.list !== undefined);
});
test('should be able to get use info', async (t) => {
    const user = await usersManagement.create({
        userInfo: {
            username: randomString(),
            password: "123456!"
        }
    });
    const userInfo = await usersManagement.get(user._id);
    t.assert(userInfo);
    t.assert(userInfo._id === user._id);
});
test('should be able to delete user', async (t) => {
    let user = await usersManagement.create({
        userInfo: {
            username: randomString(),
            password: "123456!"
        }
    });
    await usersManagement.delete(user._id);
    user = await usersManagement.get(user._id);
    t.assert(!user);
});
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiVXNlcnNNYW5hZ2VtZW50Q2xpZW50LnNwZWMuanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyIuLi8uLi8uLi8uLi9zcmMvbGliL21hbmFnZW1lbnQvVXNlcnNNYW5hZ2VtZW50Q2xpZW50LnNwZWMudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUEsT0FBTyxFQUFFLGdCQUFnQixFQUFFLE1BQU0sU0FBUyxDQUFDO0FBQzNDLE9BQU8sRUFBRSxpQkFBaUIsRUFBRSxZQUFZLEVBQUUsTUFBTSxtQkFBbUIsQ0FBQztBQUNwRSxPQUFPLElBQUksTUFBTSxLQUFLLENBQUE7QUFFdEIsTUFBTSxVQUFVLEdBQUcsSUFBSSxnQkFBZ0IsQ0FBQyxpQkFBaUIsRUFBRSxDQUFDLENBQUE7QUFDNUQsTUFBTSxlQUFlLEdBQUcsVUFBVSxDQUFDLEtBQUssQ0FBQTtBQUV4QyxJQUFJLENBQUMsK0JBQStCLEVBQUUsS0FBSyxFQUFDLENBQUMsRUFBQyxFQUFFO0lBQzlDLE1BQU0sSUFBSSxHQUFHLE1BQU0sZUFBZSxDQUFDLE1BQU0sQ0FBQztRQUN4QyxRQUFRLEVBQUU7WUFDUixRQUFRLEVBQUUsWUFBWSxFQUFFO1lBQ3hCLFFBQVEsRUFBRSxTQUFTO1NBQ3BCO0tBQ0YsQ0FBQyxDQUFBO0lBQ0YsQ0FBQyxDQUFDLE1BQU0sQ0FBQyxJQUFJLENBQUMsQ0FBQTtJQUNkLENBQUMsQ0FBQyxNQUFNLENBQUMsSUFBSSxDQUFDLEdBQUcsQ0FBQyxDQUFBO0lBQ2xCLENBQUMsQ0FBQyxNQUFNLENBQUMsSUFBSSxDQUFDLFFBQVEsQ0FBQyxDQUFBO0FBQ3pCLENBQUMsQ0FBQyxDQUFBO0FBRUYsSUFBSSxDQUFDLGlDQUFpQyxFQUFFLEtBQUssRUFBQyxDQUFDLEVBQUMsRUFBRTtJQUNoRCxNQUFNLEtBQUssR0FBRyxNQUFNLGVBQWUsQ0FBQyxJQUFJLEVBQUUsQ0FBQTtJQUMxQyxDQUFDLENBQUMsTUFBTSxDQUFDLEtBQUssQ0FBQyxDQUFBO0lBQ2YsQ0FBQyxDQUFDLE1BQU0sQ0FBQyxLQUFLLENBQUMsVUFBVSxLQUFLLFNBQVMsQ0FBQyxDQUFBO0lBQ3hDLENBQUMsQ0FBQyxNQUFNLENBQUMsS0FBSyxDQUFDLElBQUksS0FBSyxTQUFTLENBQUMsQ0FBQTtBQUNwQyxDQUFDLENBQUMsQ0FBQTtBQUVGLElBQUksQ0FBQyxnQ0FBZ0MsRUFBRSxLQUFLLEVBQUMsQ0FBQyxFQUFDLEVBQUU7SUFDL0MsTUFBTSxJQUFJLEdBQUcsTUFBTSxlQUFlLENBQUMsTUFBTSxDQUFDO1FBQ3hDLFFBQVEsRUFBRTtZQUNSLFFBQVEsRUFBRSxZQUFZLEVBQUU7WUFDeEIsUUFBUSxFQUFFLFNBQVM7U0FDcEI7S0FDRixDQUFDLENBQUE7SUFDRixNQUFNLFFBQVEsR0FBRyxNQUFNLGVBQWUsQ0FBQyxHQUFHLENBQUMsSUFBSSxDQUFDLEdBQUcsQ0FBQyxDQUFBO0lBQ3BELENBQUMsQ0FBQyxNQUFNLENBQUMsUUFBUSxDQUFDLENBQUE7SUFDbEIsQ0FBQyxDQUFDLE1BQU0sQ0FBQyxRQUFRLENBQUMsR0FBRyxLQUFLLElBQUksQ0FBQyxHQUFHLENBQUMsQ0FBQTtBQUNyQyxDQUFDLENBQUMsQ0FBQTtBQUVGLElBQUksQ0FBQywrQkFBK0IsRUFBRSxLQUFLLEVBQUMsQ0FBQyxFQUFDLEVBQUU7SUFDOUMsSUFBSSxJQUFJLEdBQUcsTUFBTSxlQUFlLENBQUMsTUFBTSxDQUFDO1FBQ3RDLFFBQVEsRUFBRTtZQUNSLFFBQVEsRUFBRSxZQUFZLEVBQUU7WUFDeEIsUUFBUSxFQUFFLFNBQVM7U0FDcEI7S0FDRixDQUFDLENBQUE7SUFDRixNQUFNLGVBQWUsQ0FBQyxNQUFNLENBQUMsSUFBSSxDQUFDLEdBQUcsQ0FBQyxDQUFBO0lBQ3RDLElBQUksR0FBRyxNQUFNLGVBQWUsQ0FBQyxHQUFHLENBQUMsSUFBSSxDQUFDLEdBQUcsQ0FBQyxDQUFBO0lBQzFDLENBQUMsQ0FBQyxNQUFNLENBQUMsQ0FBQyxJQUFJLENBQUMsQ0FBQTtBQUNqQixDQUFDLENBQUMsQ0FBQSJ9