stages:
  - build

cache:
  untracked: true
  key: ${CI_COMMIT_REF_SLUG}
  paths:
    - node_modules/
    - _site/vendor/
    - .bundled/
    - .yarn

build:
  stage: build
  script:
    - touch config.js .env
    - yarn config set registry "https://registry.npm.taobao.org"
    - echo "${ENV}">.env
    - cat .env
    - yarn
    - yarn build
  artifacts:
    paths:
      - dist
