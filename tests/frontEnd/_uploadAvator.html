<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <meta http-equiv="X-UA-Compatible" content="ie=edge" />
  <title>Document</title>
</head>

<body>
  <input name="photo" type="file" />
  <script src="../../dist/authing-js-sdk-browser.js?v=5"></script>
  <script>
    var p = document.getElementsByName('photo')[0];
    p.addEventListener('change', function (e) {
      let photo = this.files[0];
      // 这个用户池 ID 是 「Authing 使用示例」
      var authing = new Authing({ userPoolId: '5a9fa26cf8635a000185528c' });
      var email = Math.random().toString(36).substring(2) + "@authing.cn"
      var password = "123456!"
      authing.register({ email, password })
        .then(() => {
          return authing.login({ email, password })
        })
        .then(user => {
          return authing.update({ _id: user._id, photo })
        })
        .then(user => {
          console.log(user)
        })
    });
  </script>
</body>
</html>
